{"version":3,"file":"pebula-ngrid-material-paginator.mjs","sources":["../../../../libs/ngrid-material/paginator/src/lib/table-paginator.component.ts","../../../../libs/ngrid-material/paginator/src/lib/table-paginator.component.html","../../../../libs/ngrid-material/paginator/src/lib/table-paginator.module.ts","../../../../libs/ngrid-material/paginator/src/pebula-ngrid-material-paginator.ts"],"sourcesContent":["import {\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n  ViewEncapsulation,\n  OnDestroy,\n} from '@angular/core';\nimport { BooleanInput, coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { MatPaginatorIntl } from '@angular/material/paginator';\n\nimport { deprecatedWarning, unrx } from '@pebula/ngrid/core';\nimport { PblNgridComponent, PblPaginator, PblPaginatorChangeEvent } from '@pebula/ngrid';\n\nconst DEFAULT_PAGE_SIZE_OPTIONS = [5, 10, 20, 50, 100];\n\n@Component({\n  selector: 'pbl-ngrid-paginator',\n  templateUrl: './table-paginator.component.html',\n  styleUrls: ['./table-paginator.component.scss'],\n  host: {\n    'class': 'mat-paginator',\n  },\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class PblPaginatorComponent implements OnDestroy {\n  pages: number[] = [];\n  pageSizes: number[] = DEFAULT_PAGE_SIZE_OPTIONS.slice();\n\n  @Input() get pageSizeOptions(): number[] { return this._pageSizeOptions; }\n  set pageSizeOptions(value: number[]) {\n    this._pageSizeOptions = value;\n    this.pageSizes = (value || DEFAULT_PAGE_SIZE_OPTIONS).slice();\n    this.updatePageSizes();\n  }\n\n  @Input() get paginator(): PblPaginator<number> { return this._paginator; }\n  set paginator(value: PblPaginator<number>) {\n    if (this._paginator === value) {\n      return;\n    }\n    if (this._paginator) {\n      unrx.kill(this, this._paginator);\n    }\n    this._paginator = value;\n    if (value) {\n      // pagination.onChange is BehaviorSubject so handlePageChange will trigger\n      value.onChange\n        .pipe(unrx(this, value))\n        .subscribe( event => this.handlePageChange(event) );\n      this.updatePageSizes();\n    }\n  }\n\n  /**\n   * @deprecated Will be removed in v5, Use `grid` instead\n   */\n  @Input() get table(): PblNgridComponent<any> {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      deprecatedWarning('PblPaginatorComponent.table', '4', 'PblPaginatorComponent.grid');\n    }\n    return this.grid;\n  }\n  /**\n   * @deprecated Will be removed in v5, Use `grid` instead\n   */\n  set table(value: PblNgridComponent<any>) {\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      console.warn(`\"PblPaginatorComponent.table\" is deprecated and will be removed in version 5, use \"grid\" instead.`)\n    }\n    this.grid = value;\n  }\n\n  @Input() grid: PblNgridComponent<any>;\n\n  @Input() get hidePageSize(): boolean { return this._hidePageSize; }\n  set hidePageSize(value: boolean) { this._hidePageSize = coerceBooleanProperty(value); }\n\n  @Input() get hideRangeSelect(): boolean { return this._hideRangeSelect; }\n  set hideRangeSelect(value: boolean) { this._hideRangeSelect = coerceBooleanProperty(value); }\n\n  private _pageSizeOptions: number[];\n  private _paginator: PblPaginator<number>;\n  private _hidePageSize = false;\n  private _hideRangeSelect = false;\n\n  constructor(@Optional() grid: PblNgridComponent<any>,\n              public _intl: MatPaginatorIntl,\n              private cdr: ChangeDetectorRef) {\n    if (grid) {\n      this.grid = grid;\n    }\n    _intl.changes\n      .pipe(unrx(this))\n      .subscribe(() => this.cdr.markForCheck());\n  }\n\n  ngOnDestroy(): void {\n    unrx.kill(this);\n  }\n\n  private updatePageSizes(): void {\n    if (this.paginator && this.pageSizes.indexOf(this.paginator.perPage) === -1) {\n      this.pageSizes.push(this.paginator.perPage);\n    }\n    this.pageSizes.sort((a, b) => a - b);\n  }\n\n  private handlePageChange(event: PblPaginatorChangeEvent): void {\n    if (this.pages.length !== this.paginator.totalPages) {\n      const pages = this.pages = [];\n      for (let i = 1, len = this.paginator.totalPages+1; i<len; i++) { pages.push(i); }\n    }\n    // this is required here to prevent `ExpressionChangedAfterItHasBeenCheckedError` when the component has or wrapped\n    // by an ngIf\n    this.cdr.detectChanges();\n    this.cdr.markForCheck();\n  }\n\n  static ngAcceptInputType_hidePageSize: BooleanInput;\n  static ngAcceptInputType_hideRangeSelect: BooleanInput;\n}\n","<div class=\"mat-paginator-outer-container\">\n  <div class=\"mat-paginator-container\">\n    <div *ngIf=\"!hidePageSize\" class=\"mat-paginator-page-size\">\n      <div class=\"mat-paginator-page-size-label\">\n        {{_intl.itemsPerPageLabel}}\n      </div>\n\n      <mat-form-field *ngIf=\"pageSizes.length > 1\"\n                      class=\"mat-paginator-page-size-select\">\n        <mat-select\n          [value]=\"paginator.perPage\"\n          [aria-label]=\"_intl.itemsPerPageLabel\"\n          [disabled]=\"pageSizes[0] >= paginator.total && (!paginator.hasPrev() && !paginator.hasNext())\"\n          (selectionChange)=\"paginator.perPage = $event.value\">\n          <mat-option *ngFor=\"let pageSizeOption of pageSizes\" [value]=\"pageSizeOption\">\n            {{pageSizeOption}}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n      <div *ngIf=\"pageSizes.length <= 1\">{{paginator?.perPage}}</div>\n    </div>\n\n    <div class=\"mat-paginator-range-actions\">\n      <div *ngIf=\"paginator.kind ==='pageNumber'\" class=\"mat-paginator-range-label\">\n        {{_intl.getRangeLabel(paginator.page - 1, paginator.perPage, paginator.total)}}\n      </div>\n\n      <button mat-icon-button type=\"button\"\n              class=\"mat-paginator-navigation-previous\"\n              (click)=\"paginator.prevPage()\"\n              [attr.aria-label]=\"_intl.previousPageLabel\"\n              [matTooltip]=\"_intl.previousPageLabel\"\n              [matTooltipPosition]=\"'above'\"\n              [disabled]=\"!paginator.hasPrev()\">\n        <svg class=\"mat-paginator-icon\" viewBox=\"0 0 24 24\" focusable=\"false\">\n          <path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"/>\n        </svg>\n      </button>\n\n      <mat-form-field *ngIf=\"!hideRangeSelect && paginator.kind ==='pageNumber' && pageSizes.length >= 1\"\n                      class=\"mat-paginator-page-size-select\">\n        <mat-select\n          [value]=\"paginator.page\"\n          [disabled]=\"paginator.totalPages === 1\"\n          (selectionChange)=\"paginator.page = $event.value\">\n          <mat-option *ngFor=\"let p of pages\" [value]=\"p\">{{p}}</mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <button mat-icon-button type=\"button\"\n              class=\"mat-paginator-navigation-next\"\n              (click)=\"paginator.nextPage()\"\n              [attr.aria-label]=\"_intl.nextPageLabel\"\n              [matTooltip]=\"_intl.nextPageLabel\"\n              [matTooltipPosition]=\"'above'\"\n              [disabled]=\"!paginator.hasNext()\">\n        <svg class=\"mat-paginator-icon\" viewBox=\"0 0 24 24\" focusable=\"false\">\n          <path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/>\n        </svg>\n      </button>\n    </div>\n  </div>\n</div>\n","import { NgModule, ComponentFactoryResolver, Injector } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\n\nimport { PblNgridModule } from '@pebula/ngrid';\nimport { PblPaginatorComponent } from './table-paginator.component';\n// TODO: Remove MatPaginatorModule and the initial code in the constructor\n// set the styles in the SCSS.\n\n@NgModule({\n    imports: [CommonModule, MatPaginatorModule, MatSelectModule, MatTooltipModule, MatButtonModule, PblNgridModule],\n    declarations: [PblPaginatorComponent],\n    exports: [PblPaginatorComponent]\n})\nexport class PblNgridPaginatorModule {\n  constructor(cf: ComponentFactoryResolver, injector: Injector) {\n    // this is a workaround to ensure CSS from mat slider is loaded, otherwise it is omitted.\n    cf.resolveComponentFactory(MatPaginator).create(injector);\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}